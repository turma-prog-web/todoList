<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../app/utils/router.js"></script>
    <script>
        var {user, token} = parseQuery(window.location.search)
        var autenticado =  token != undefined && token.length > 0
        if(autenticado){
            var user = JSON.parse(user)
            window.router.goHome(user._id)
        }else
            window.router.goLogin()

        //Separa o retorno por oauth do login
        function parseQuery(queryString) {
            var query = {};
            var pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');
            for (var i = 0; i < pairs.length; i++) {
                var pair = pairs[i].split('=');
                query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');
            }
            return query;
        }
    </script>
</head>
</html>